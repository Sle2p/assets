var C=Object.defineProperty,I=Object.defineProperties;var b=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var p=(t,e,o)=>e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,m=(t,e)=>{for(var o in e||(e={}))B.call(e,o)&&p(t,o,e[o]);if(c)for(var o of c(e))j.call(e,o)&&p(t,o,e[o]);return t},_=(t,e)=>I(t,b(e));import{_ as k,a as f,h as v}from"./index.77898d47.js";import{m as g,r as S,c as T,t as h,e as w,o as y,v as E,x as r,j as i,f as O,g as P,y as V,C as A,F,A as L,B as N}from"./@vue.86bfd1f8.js";import{b as R}from"./vue-router.9a8cfd5a.js";import"./vuex.418d299d.js";import"./axios.3fb31503.js";const K={components:{Bar:g(()=>f(()=>import("./Bar.dec70a38.js"),["assets/Bar.dec70a38.js","assets/Bar.265d0c8c.css","assets/BarItem.d7ffadf2.js","assets/BarItem.62f2bae4.css","assets/index.77898d47.js","assets/index.b4b37ec1.css","assets/@vue.86bfd1f8.js","assets/vue-router.9a8cfd5a.js","assets/vuex.418d299d.js","assets/axios.3fb31503.js"])),Input:g(()=>f(()=>import("./Input.c5c04ff4.js"),["assets/Input.c5c04ff4.js","assets/Input.3af0a8c2.css","assets/index.77898d47.js","assets/index.b4b37ec1.css","assets/@vue.86bfd1f8.js","assets/vue-router.9a8cfd5a.js","assets/vuex.418d299d.js","assets/axios.3fb31503.js"]))},meta(){return{title:"\u5FD8\u8BB0\u5BC6\u7801"}},setup(){const t=R(),e=S({email:null,code:null,password:null,status:T(()=>!!e.password)}),o=async d=>{await v({method:"POST",url:"code",data:{email:e.email}})},s=async d=>{try{const{data:{body:{error:u,data:{user:n,token:l}}}}=await v({method:"POST",url:"forget",data:{email:e.email,code:e.code,password:e.password}});u||(localStorage.token=l,localStorage.user=JSON.stringify(n),t.replace("/profile"))}catch{d.target.innerHTML="\u4FEE\u6539\u5931\u8D25",setTimeout(()=>{d.target.innerHTML="\u4FEE\u6539"},1e3)}};return _(m({},h(e)),{getCode:o,forget:s})}},U=t=>(L("data-v-40cc53da"),t=t(),N(),t),D={forget:""},H={class:"card"},M=U(()=>r("section",{class:"title"},"\u4E00\u7ED8",-1)),J={class:"submit"},q=["disabled"];function x(t,e,o,s,d,u){const n=w("Input"),l=w("Bar");return y(),E(F,null,[r("section",D,[r("section",H,[M,i(n,{name:"\u8BF7\u8F93\u5165\u90AE\u7BB1",value:t.email,"onUpdate:value":e[0]||(e[0]=a=>t.email=a)},null,8,["value"]),t.email&&t.email.match(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/)?(y(),O(n,{key:0,name:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",value:t.code,"onUpdate:value":e[2]||(e[2]=a=>t.code=a)},{default:P(()=>[r("button",{class:"code",onClick:e[1]||(e[1]=(...a)=>s.getCode&&s.getCode(...a))},"\u9A8C\u8BC1\u7801")]),_:1},8,["value"])):V("",!0),i(n,{type:"password",name:"\u8BF7\u8F93\u5165\u5BC6\u7801",value:t.password,"onUpdate:value":e[3]||(e[3]=a=>t.password=a),onKeyup:A(s.forget,["enter"])},null,8,["value","onKeyup"]),r("section",J,[r("button",{onClick:e[4]||(e[4]=(...a)=>s.forget&&s.forget(...a)),disabled:!t.status},"\u4FEE\u6539",8,q)])])]),i(l)],64)}var Z=k(K,[["render",x],["__scopeId","data-v-40cc53da"]]);export{Z as default};
