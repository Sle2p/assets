var J=Object.defineProperty,K=Object.defineProperties;var Q=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var H=(t,e,a)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,z=(t,e)=>{for(var a in e||(e={}))U.call(e,a)&&H(t,a,e[a]);if($)for(var a of $(e))X.call(e,a)&&H(t,a,e[a]);return t},N=(t,e)=>K(t,Q(e));import{_ as Y,a as u}from"./index.77898d47.js";import{u as x}from"./vuex.418d299d.js";import{u as t1}from"./vue-router.9a8cfd5a.js";import{m as _,r as a1,c as F,w as e1,q as s1,t as o1,e as h,D as q,o as i,v as g,f as v,y as j,x as s,E,F as w,G,H as W,I as Z,j as S,g as f,A as l1,B as i1}from"./@vue.86bfd1f8.js";import"./axios.3fb31503.js";const n1={components:{AuthorHeader:_(()=>u(()=>import("./AuthorHeader.c610ce7d.js"),["assets/AuthorHeader.c610ce7d.js","assets/AuthorHeader.6694e167.css","assets/index.77898d47.js","assets/index.b4b37ec1.css","assets/@vue.86bfd1f8.js","assets/vue-router.9a8cfd5a.js","assets/vuex.418d299d.js","assets/axios.3fb31503.js"])),Content:_(()=>u(()=>import("./Content.f51a9ba2.js"),["assets/Content.f51a9ba2.js","assets/Content.7619323e.css","assets/time.a04421fb.js","assets/index.77898d47.js","assets/index.b4b37ec1.css","assets/@vue.86bfd1f8.js","assets/vue-router.9a8cfd5a.js","assets/vuex.418d299d.js","assets/axios.3fb31503.js"])),Comment:_(()=>u(()=>import("./Comment.b3dbb855.js"),["assets/Comment.b3dbb855.js","assets/Comment.dcc58065.css","assets/@vue.86bfd1f8.js","assets/vue-router.9a8cfd5a.js","assets/index.77898d47.js","assets/index.b4b37ec1.css","assets/vuex.418d299d.js","assets/axios.3fb31503.js","assets/time.a04421fb.js","assets/Empty.7d662946.js","assets/Empty.769a60d9.css"])),SimpleTags:_(()=>u(()=>import("./SimpleTags.b40e3f30.js"),["assets/SimpleTags.b40e3f30.js","assets/SimpleTags.816526ad.css","assets/index.77898d47.js","assets/index.b4b37ec1.css","assets/@vue.86bfd1f8.js","assets/vue-router.9a8cfd5a.js","assets/vuex.418d299d.js","assets/axios.3fb31503.js"])),Bar:_(()=>u(()=>import("./Bar.dec70a38.js"),["assets/Bar.dec70a38.js","assets/Bar.265d0c8c.css","assets/BarItem.d7ffadf2.js","assets/BarItem.62f2bae4.css","assets/index.77898d47.js","assets/index.b4b37ec1.css","assets/@vue.86bfd1f8.js","assets/vue-router.9a8cfd5a.js","assets/vuex.418d299d.js","assets/axios.3fb31503.js"])),BarItem:_(()=>u(()=>import("./BarItem.d7ffadf2.js"),["assets/BarItem.d7ffadf2.js","assets/BarItem.62f2bae4.css","assets/index.77898d47.js","assets/index.b4b37ec1.css","assets/@vue.86bfd1f8.js","assets/vue-router.9a8cfd5a.js","assets/vuex.418d299d.js","assets/axios.3fb31503.js"])),Empty:_(()=>u(()=>import("./Empty.7d662946.js"),["assets/Empty.7d662946.js","assets/Empty.769a60d9.css","assets/index.77898d47.js","assets/index.b4b37ec1.css","assets/@vue.86bfd1f8.js","assets/vue-router.9a8cfd5a.js","assets/vuex.418d299d.js","assets/axios.3fb31503.js"]))},async init({store:t,route:e}){await Promise.allSettled([t.dispatch("illust",{route:e})])},meta({store:t,route:e}){var k;const a=(k=t.state[e.path])==null?void 0:k.data,[{color:n}]=a.images,c=new Set;return a.tags.forEach(d=>{c.add(d.name),d.translate&&c.add(d.translate)}),{title:[a.title,a.author.name].join(" - "),description:`\u672C\u4F5C\u300C${a.title}\u300D\u4E3A\u9644\u6709\u300C${Array.from(c).slice(0,5).join("\u300D\u300C")}\u300D\u7B49\u6807\u7B7E\u7684\u63D2\u753B\u3002\u7531\u753B\u5E08\u300C${a.author.name}\u300D\u7ED8\u5236/\u5206\u4EAB\u3002`,keywords:Array.from(c),image:a.images[0].master,theme:n}},setup(){const t=x(),e=t1(),a=a1({data:F(()=>{var o;return(o=t.state[e.path])==null?void 0:o.data}),mark_status:F(()=>{var o;return(o=t.state[e.path])==null?void 0:o.mark}),active:0,status:!0,panel:!1,ref:{nav:null}}),n=()=>a.status=!a.status,c=o=>a.active=o,k=o=>{var p,y,C,L;const r=((y=(p=a.data)==null?void 0:p.images)==null?void 0:y.length)-1||0,b=a.active;!r||(a.active<r?o?a.active+=1:a.active&&(a.active-=1):o||(a.active-=1),b!==a.active&&t.commit("theme",(L=(C=a==null?void 0:a.data)==null?void 0:C.images[a.active])==null?void 0:L.color))},d=()=>{var o,r;a.panel=!a.panel,a.panel?t.commit("theme","#ffffff"):t.commit("theme",(r=(o=a==null?void 0:a.data)==null?void 0:o.images[a.active])==null?void 0:r.color)},A=()=>t.dispatch("markIllust",e),B=()=>t.dispatch("unmarkIllust",e);return e1(()=>a.active,()=>{var o;a.ref.nav.scrollTo(((o=a.ref.nav.children[a.active])==null?void 0:o.offsetLeft)-document.documentElement.clientWidth/2,0)}),s1(()=>{localStorage.token&&t.dispatch("markIllustStatus",e)}),N(z({},o1(a)),{change:k,select:c,nav:n,menu:d,mark:A,unmark:B})}},I=t=>(l1("data-v-4a76b204"),t=t(),i1(),t),r1={class:"list"},c1=["data-style"],d1=["data-src"],m1=["onClick","data-style"],u1={class:"card"},_1=I(()=>s("svg",{viewBox:"0 0 496 496"},[s("path",{fill:"var(--fit)",d:"M248,0C111,0,0,111,0,248S111,496,248,496,496,385,496,248,385,0,248,0ZM117.61,165.8,250.05,105a13.31,13.31,0,0,1,9.89,0L392.39,165.8c2.7,1.24,2.7,3.29,0,4.54L259.94,231.2a13.61,13.61,0,0,1-9.89,0L117.61,170.34C114.88,169.09,114.88,167,117.61,165.8ZM392.39,339h0L260,405a12.58,12.58,0,0,1-9.89,0L117.61,339c-2.7-1.35-2.7-3.56,0-4.92l31.72-15.76a12.61,12.61,0,0,1,9.9,0l90.83,45.16a12.5,12.5,0,0,0,9.89,0l90.83-45.16a12.58,12.58,0,0,1,9.89,0l31.72,15.8C395.12,335.46,395.12,337.67,392.39,339Zm0-87.1L260,317.84a12.58,12.58,0,0,1-9.89,0L117.61,251.92c-2.7-1.36-2.7-3.58,0-4.93l31.72-15.79a12.52,12.52,0,0,1,9.9,0l90.83,45.21a12.58,12.58,0,0,0,9.89,0l90.83-45.21a12.5,12.5,0,0,1,9.89,0L392.39,247C395.12,248.35,395.12,250.56,392.39,251.92Z"})],-1)),v1=I(()=>s("svg",{viewBox:"0 0 496 496"},[s("path",{fill:"var(--fit)",d:"M248,0C111,0,0,111,0,248S111,496,248,496,496,385,496,248,385,0,248,0ZM386,259.91,255.85,394a10.92,10.92,0,0,1-15.76,0L110,260c-26.68-32.56-25.39-81.19,4.48-111.73l1.47-1.47a80.06,80.06,0,0,1,104.68-8.59l17.54,53-58.87,39.25,88.3,88.3-29.43-78.49L297.06,201l-21-63.41a80.12,80.12,0,0,1,104,9.08l1.47,1.53C411.37,178.78,412.66,227.41,386,259.91Z"})],-1)),f1=I(()=>s("svg",{viewBox:"0 0 496 496"},[s("path",{fill:"var(--fit)",d:"M248,0C111,0,0,111,0,248S111,496,248,496,496,385,496,248,385,0,248,0ZM380.53,267.91,261.86,390.44a19.23,19.23,0,0,1-27.78,0L115.42,267.91C81,232.28,83,173.28,121.49,140.41c33.6-28.64,83.65-23.49,114.43,8.34L248,161.2l12.09-12.45c30.84-31.83,80.82-37,114.43-8.34C413,173.28,415.06,232.28,380.53,267.91Z"})],-1)),p1=["href"],h1=I(()=>s("svg",{viewBox:"0 0 512 512"},[s("path",{fill:"var(--fit)",d:"M256,166.19a89.81,89.81,0,0,0,0,179.62h.09A89.81,89.81,0,0,0,256,166.19Zm57.79,105.32a59.74,59.74,0,0,1-115.3-31.29,29.85,29.85,0,0,0,41.73-41.73A59.39,59.39,0,0,1,256,196.13a59.72,59.72,0,0,1,57.79,75.38ZM256,0C114.58,0,0,114.58,0,256S114.58,512,256,512,512,397.42,512,256,397.42,0,256,0ZM433.44,265.1c-33.8,66-100.77,110.64-177.44,110.64S112.38,331.09,78.56,265.11a20.15,20.15,0,0,1,0-18.21c33.8-66,100.77-110.64,177.44-110.64s143.62,44.65,177.44,110.63A20.15,20.15,0,0,1,433.44,265.1Z"})],-1)),g1=[h1],k1=I(()=>s("svg",{viewBox:"0 0 496 496"},[s("path",{fill:"var(--fit)",d:"M248,0C111,0,0,111,0,248S111,496,248,496,496,385,496,248,385,0,248,0ZM376.88,325.33a24.31,24.31,0,0,1,0,34.37L359.7,376.88a24.31,24.31,0,0,1-34.37,0L248,299.56l-77.33,77.32a24.31,24.31,0,0,1-34.37,0L119.12,359.7a24.31,24.31,0,0,1,0-34.37L196.44,248l-77.32-77.33a24.31,24.31,0,0,1,0-34.37l17.18-17.18a24.31,24.31,0,0,1,34.37,0L248,196.44l77.33-77.32a24.31,24.31,0,0,1,34.37,0l17.18,17.18a24.31,24.31,0,0,1,0,34.37L299.56,248Z"})],-1));function y1(t,e,a,n,c,k){var C,L,M,T,D,P,V,R,O;const d=h("AuthorHeader"),A=h("SimpleTags"),B=h("Content"),o=h("Empty"),r=h("BarItem"),b=h("Bar"),p=q("lazy"),y=q("dragscroll");return i(),g(w,null,[(i(),g("section",{illust:"",key:t.$route.fullPath},[((C=t.data)==null?void 0:C.author)?(i(),v(d,{key:0,data:(L=t.data)==null?void 0:L.author,status:t.panel},null,8,["data","status"])):j("",!0),s("section",{onClick:e[0]||(e[0]=(...l)=>n.nav&&n.nav(...l)),class:"detail",style:W({"--left":`-${t.active*100}%`})},[E(s("section",r1,[(i(!0),g(w,null,G((M=t.data)==null?void 0:M.images,(l,m)=>(i(),g("picture",{key:l,style:W({"--left":`${m*100}%`})},[E(s("section",{class:"bg","data-style":`--bg:url('${l.master}')`},null,8,c1),[[p,void 0,"style"]]),E(s("img",{"data-src":l.master},null,8,d1),[[p]])],4))),128))],512),[[y,n.change,void 0,{x:!0}]])],4),s("section",{class:Z(t.status&&((D=(T=t.data)==null?void 0:T.images)==null?void 0:D.length)>1?["thumbnails"]:["thumbnails","invisible"])},[E(s("nav",{ref:l=>t.ref.nav=l},[(i(!0),g(w,null,G((P=t.data)==null?void 0:P.images,(l,m)=>(i(),g("section",{class:"item",key:l},[E(s("section",{class:Z(t.active===m?["box","active"]:["box"]),onClick:C1=>n.select(m),"data-style":`--bg:url('${l.master}')`},null,10,m1),[[p,void 0,"style"]])]))),128))],512),[[y,void 0,void 0,{x:!0,scroll:!0}]])],2),s("section",{class:Z(t.panel?["panel","show"]:["panel"])},[((R=(V=t.data)==null?void 0:V.tags)==null?void 0:R.length)?(i(),v(A,{key:0,data:(O=t.data)==null?void 0:O.tags},null,8,["data"])):j("",!0),s("section",u1,[t.data?(i(),v(B,{key:0,data:t.data},null,8,["data"])):j("",!0),S(o,{message:"\u66F4\u591A\u529F\u80FD\u5F00\u53D1\u4E2D"})])],2)])),t.panel?(i(),v(b,{key:1,home:!t.panel,back:!t.panel},{center:f(()=>[S(r,{title:"\u5173\u95ED",onClick:n.menu},{default:f(()=>[k1]),_:1},8,["onClick"])]),_:1},8,["home","back"])):(i(),v(b,{key:0,status:t.status},{right:f(()=>[S(r,{title:"\u8BE6\u60C5",onClick:n.menu},{default:f(()=>[_1]),_:1},8,["onClick"]),t.mark_status?(i(),v(r,{key:0,title:"\u53D6\u6D88\u559C\u6B22",onClick:n.unmark},{default:f(()=>[v1]),_:1},8,["onClick"])):(i(),v(r,{key:1,title:"\u559C\u6B22",onClick:n.mark},{default:f(()=>[f1]),_:1},8,["onClick"])),S(r,{title:"\u67E5\u770B\u539F\u56FE"},{default:f(()=>{var l,m;return[s("a",{target:"_blank",href:(m=(l=t.data)==null?void 0:l.images[t.active])==null?void 0:m.original},g1,8,p1)]}),_:1})]),_:1},8,["status"]))],64)}var B1=Y(n1,[["render",y1],["__scopeId","data-v-4a76b204"]]);export{B1 as default};
