var I=Object.defineProperty,B=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var m=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var c=(t,e,o)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,_=(t,e)=>{for(var o in e||(e={}))S.call(e,o)&&c(t,o,e[o]);if(m)for(var o of m(e))T.call(e,o)&&c(t,o,e[o]);return t},v=(t,e)=>B(t,j(e));import{_ as h,a as f,h as g}from"./index.b526fc27.js";import{m as w,r as R,c as V,t as E,e as u,o as y,v as N,x as a,j as l,f as O,g as b,y as P,C as A,F as L,A as U,B as K,J as k}from"./@vue.86bfd1f8.js";import{b as D}from"./vue-router.9a8cfd5a.js";import"./vuex.418d299d.js";import"./axios.3fb31503.js";const F={components:{Bar:w(()=>f(()=>import("./Bar.88dd7e64.js"),["assets/Bar.88dd7e64.js","assets/Bar.265d0c8c.css","assets/BarItem.b5e7eb7f.js","assets/BarItem.62f2bae4.css","assets/index.b526fc27.js","assets/index.b4b37ec1.css","assets/@vue.86bfd1f8.js","assets/vue-router.9a8cfd5a.js","assets/vuex.418d299d.js","assets/axios.3fb31503.js"])),Input:w(()=>f(()=>import("./Input.1d0ad664.js"),["assets/Input.1d0ad664.js","assets/Input.3af0a8c2.css","assets/index.b526fc27.js","assets/index.b4b37ec1.css","assets/@vue.86bfd1f8.js","assets/vue-router.9a8cfd5a.js","assets/vuex.418d299d.js","assets/axios.3fb31503.js"]))},meta(){return{title:"\u6CE8\u518C"}},setup(){const t=D(),e=R({email:null,code:null,username:null,password:null,status:V(()=>!!e.username&&!!e.password)}),o=async d=>{await g({method:"POST",url:"code",data:{email:e.email}})},n=async d=>{try{const{data:{body:{error:p,data:{user:r,token:i}}}}=await g({method:"POST",url:"register",data:{email:e.email,code:e.code,name:e.username,password:e.password}});p||(localStorage.token=i,localStorage.user=JSON.stringify(r),t.replace("/profile"))}catch{d.target.innerHTML="\u6CE8\u518C\u5931\u8D25",setTimeout(()=>{d.target.innerHTML="\u6CE8\u518C"},1e3)}};return v(_({},E(e)),{getCode:o,register:n})}},H=t=>(U("data-v-71dcbe50"),t=t(),K(),t),J={register:""},M={class:"card"},q=H(()=>a("section",{class:"title"},"\u4E00\u7ED8",-1)),z={class:"login"},G=k(" \u5DF2\u6709\u8D26\u53F7\uFF1F"),Q=k("\u53BB\u767B\u5F55"),W={class:"submit"},X=["disabled"];function Y(t,e,o,n,d,p){const r=u("Input"),i=u("router-link"),C=u("Bar");return y(),N(L,null,[a("section",J,[a("section",M,[q,l(r,{name:"\u8BF7\u8F93\u5165\u90AE\u7BB1",value:t.email,"onUpdate:value":e[0]||(e[0]=s=>t.email=s)},null,8,["value"]),t.email&&t.email.match(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/)?(y(),O(r,{key:0,name:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",value:t.code,"onUpdate:value":e[2]||(e[2]=s=>t.code=s)},{default:b(()=>[a("button",{class:"code",onClick:e[1]||(e[1]=(...s)=>n.getCode&&n.getCode(...s))},"\u9A8C\u8BC1\u7801")]),_:1},8,["value"])):P("",!0),l(r,{name:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",value:t.username,"onUpdate:value":e[3]||(e[3]=s=>t.username=s)},null,8,["value"]),l(r,{type:"password",name:"\u8BF7\u8F93\u5165\u5BC6\u7801",value:t.password,"onUpdate:value":e[4]||(e[4]=s=>t.password=s),onKeyup:A(n.register,["enter"])},null,8,["value","onKeyup"]),a("nav",null,[a("section",z,[a("span",null,[G,l(i,{to:"/login",replace:""},{default:b(()=>[Q]),_:1})])])]),a("section",W,[a("button",{onClick:e[5]||(e[5]=(...s)=>n.register&&n.register(...s)),disabled:!t.status},"\u6CE8\u518C",8,X)])])]),l(C)],64)}var se=h(F,[["render",Y],["__scopeId","data-v-71dcbe50"]]);export{se as default};
